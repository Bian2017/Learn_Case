{"version":3,"sources":["../src/4. co.js"],"names":["co","require","fetch","run","generator","iterator","it","next","promise","value","then","it2","data","promise2","data2","res","json","movie","summary","console","log"],"mappings":";;;;;;;;AAAA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,QAAQD,QAAQ,YAAR,CAAd;;AAEA,SAASE,GAAT,CAAaC,SAAb,EAAwB;AACtB,MAAMC,WAAWD,WAAjB;AACA,MAAME,KAAKD,SAASE,IAAT,EAAX;AACA,MAAMC,UAAUF,GAAGG,KAAnB;;AAEAD,UAAQE,IAAR,CAAa,gBAAQ;AAAiB;AACpC,QAAMC,MAAMN,SAASE,IAAT,CAAcK,IAAd,CAAZ;AACA,QAAMC,WAAWF,IAAIF,KAArB;;AAEAI,aAASH,IAAT,CAAc,iBAAS;AACrBL,eAASE,IAAT,CAAcO,KAAd;AACD,KAFD;AAGD,GAPD;AAQD;;AAEDX,6CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACgBD,MAAM,yCAAN,CADhB;;AAAA;AACIa,aADJ;AAAA;AAAA,iBAEkBA,IAAIC,IAAJ,EAFlB;;AAAA;AAEIC,eAFJ;AAGIC,iBAHJ,GAGcD,MAAMC,OAHpB;;;AAKFC,kBAAQC,GAAR,CAAY,cAAZ,EAA4BF,OAA5B;;AALE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAJ;;AAQA;;AAEA;AACAlB,4CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACiBE,MAAM,yCAAN,CADjB;;AAAA;AACKa,aADL;AAAA;AAAA,iBAEmBA,IAAIC,IAAJ,EAFnB;;AAAA;AAEKC,eAFL;AAGKC,iBAHL,GAGeD,MAAMC,OAHrB;;;AAKDC,kBAAQC,GAAR,CAAY,aAAZ,EAA2BF,OAA3B;;AALC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAH","file":"4. co.js","sourcesContent":["const co = require('co');\nconst fetch = require('node-fetch');\n\nfunction run(generator) {\n  const iterator = generator()\n  const it = iterator.next()\n  const promise = it.value\n\n  promise.then(data => {                //value的值可以直接转换成promise？？？\n    const it2 = iterator.next(data)\n    const promise2 = it2.value\n    \n    promise2.then(data2 => {\n      iterator.next(data2)\n    })\n  })\n}\n\nrun(function *() {\n  const res = yield fetch('https://api.douban.com/v2/movie/1291843');\n  const movie = yield res.json();\n  const summary = movie.summary\n\n  console.log('run-summary:', summary)\n})\n\n/***********************************************************/\n\n// co实现了generator的自动执行，不需要手动执行。co源码很短，查看源码：npm i co -D\nco(function *() {\n  const res = yield fetch('https://api.douban.com/v2/movie/1291843');\n  const movie = yield res.json();\n  const summary = movie.summary\n\n  console.log('co-summary:', summary)\n})"]}